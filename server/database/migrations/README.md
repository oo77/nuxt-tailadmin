# Создание новой миграции

Этот файл служит шаблоном для создания новых миграций базы данных.

## Инструкция

1. **Скопируйте этот файл** и переименуйте его по формату:

   ```
   YYYYMMDD_NNN_description.ts
   ```

   Где:

   - `YYYYMMDD` - текущая дата (например, `20251215`)
   - `NNN` - порядковый номер (001, 002, 003...)
   - `description` - краткое описание на английском (например, `add_courses_table`)

2. **Заполните метаданные** в комментариях:

   - Краткое описание
   - Дату создания
   - Подробное описание

3. **Реализуйте функцию `up()`**:

   - Добавьте SQL-запросы для применения изменений
   - Используйте `IF NOT EXISTS` для безопасности
   - Добавьте логирование важных шагов

4. **Реализуйте функцию `down()`**:

   - Добавьте SQL-запросы для отката изменений
   - Используйте `IF EXISTS` для безопасности
   - Откат должен полностью отменять изменения из `up()`

5. **Обновите `description`**:

   - Краткое описание на русском языке

6. **Протестируйте миграцию**:
   ```bash
   npm run db:migrate    # Применить
   npm run db:rollback   # Откатить
   npm run db:migrate    # Применить снова
   ```

## Примеры имен файлов

✅ Правильно:

- `20251215_001_create_users_table.ts`
- `20251215_002_seed_admin_user.ts`
- `20251216_001_add_courses_table.ts`
- `20251216_002_add_user_avatar_column.ts`

❌ Неправильно:

- `migration.ts`
- `users.ts`
- `001_users.ts`
- `create-users.ts`

## Полезные ссылки

- [Документация по миграциям](../../docs/DATABASE_MIGRATIONS.md)
- [MySQL ALTER TABLE](https://dev.mysql.com/doc/refman/8.0/en/alter-table.html)
- [MySQL CREATE TABLE](https://dev.mysql.com/doc/refman/8.0/en/create-table.html)
