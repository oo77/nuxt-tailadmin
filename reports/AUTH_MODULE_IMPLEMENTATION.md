# –û–¢–ß–ï–¢ –û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ú–û–î–£–õ–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò –ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò

**–î–∞—Ç–∞:** 15 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** ATC Platform - Nuxt TailAdmin  
**–ú–æ–¥—É–ª—å:** 2.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:**

- `mysql2` - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è MySQL
- `bcryptjs` - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `jsonwebtoken` - —Ä–∞–±–æ—Ç–∞ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- `zod` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `@types/bcryptjs`, `@types/jsonwebtoken` - TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

- `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (DATABASE\_\*, JWT_SECRET, –∏ —Ç.–¥.)

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `server/utils/db.ts` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MySQL (–ø—É–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- `server/database/init.ts` - —Å–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- `server/database/schema.sql` - SQL —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã users
- `server/api/db/init.get.ts` - API endpoint –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- `server/api/db/test.get.ts` - API endpoint –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã users:**

```sql
- id VARCHAR(191) PRIMARY KEY
- role ENUM('ADMIN', 'MANAGER', 'TEACHER', 'STUDENT')
- name VARCHAR(191)
- email VARCHAR(191) UNIQUE
- password_hash VARCHAR(191)
- phone VARCHAR(191)
- workplace VARCHAR(191)
- position VARCHAR(191)
- pinfl VARCHAR(14)
- created_at, updated_at DATETIME(3)
```

**–ò–Ω–¥–µ–∫—Å—ã:**

- idx_email (email)
- idx_role (role)
- idx_pinfl (pinfl)

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

- Email: `admin@atc.uz`
- –ü–∞—Ä–æ–ª—å: `admin123`
- –†–æ–ª—å: ADMIN

### 3. –¢–∏–ø–∏–∑–∞—Ü–∏—è (TypeScript)

**–§–∞–π–ª:** `server/types/auth.ts`

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã:**

- `UserRole` - enum —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `User` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- `UserPublic` - –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
- `JwtPayload` - payload JWT —Ç–æ–∫–µ–Ω–∞
- `RegisterData` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `LoginData` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞
- `AuthResponse` - –æ—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `ErrorResponse` - –æ—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `ValidationResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 4. –£—Ç–∏–ª–∏—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª:** `server/utils/auth.ts`

**–§—É–Ω–∫—Ü–∏–∏:**

- `hashPassword()` - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ bcrypt
- `verifyPassword()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
- `generateToken()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT access —Ç–æ–∫–µ–Ω–∞ (7 –¥–Ω–µ–π)
- `generateRefreshToken()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–∞ (30 –¥–Ω–µ–π)
- `verifyToken()` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è access —Ç–æ–∫–µ–Ω–∞
- `verifyRefreshToken()` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–∞
- `extractToken()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization
- `toPublicUser()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ User –≤ UserPublic
- `createTokenPayload()` - —Å–æ–∑–¥–∞–Ω–∏–µ payload –¥–ª—è —Ç–æ–∫–µ–Ω–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- JWT_SECRET –∏ REFRESH_TOKEN_SECRET –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ .env
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bcrypt —Å 10 —Ä–∞—É–Ω–¥–∞–º–∏ —Å–æ–ª–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Bearer —Ç–æ–∫–µ–Ω–æ–≤

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `server/utils/validation.ts`

**–°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (Zod):**

- `emailSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è email
- `passwordSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤, –∑–∞–≥–ª–∞–≤–Ω–∞—è, —Å—Ç—Ä–æ—á–Ω–∞—è, —Ü–∏—Ñ—Ä–∞)
- `nameSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ (—Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã)
- `phoneSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ñ–æ—Ä–º–∞—Ç +998XXXXXXXXX)
- `pinflSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ü–ò–ù–§–õ (14 —Ü–∏—Ñ—Ä)
- `roleSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–∏
- `registerSchema` - —Å—Ö–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `loginSchema` - —Å—Ö–µ–º–∞ –≤—Ö–æ–¥–∞
- `updateProfileSchema` - —Å—Ö–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- `changePasswordSchema` - —Å—Ö–µ–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è

**–§—É–Ω–∫—Ü–∏—è:**

- `validate()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ—à–∏–±–æ–∫

### 6. API Endpoints

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ endpoints:**

#### a) –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `POST /api/auth/register`

**–§–∞–π–ª:** `server/api/auth/register.post.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤
- –í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç–æ–∫–µ–Ω–æ–≤

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@test.uz",
  "password": "Test123",
  "phone": "+998901234567",
  "role": "STUDENT"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "success": true,
  "user": { ... },
  "token": "...",
  "refreshToken": "..."
}
```

#### b) –í—Ö–æ–¥: `POST /api/auth/login`

**–§–∞–π–ª:** `server/api/auth/login.post.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í–∞–ª–∏–¥–∞—Ü–∏—è credentials
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ bcrypt
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "email": "admin@atc.uz",
  "password": "admin123"
}
```

#### c) –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞: `GET /api/auth/verify`

**–§–∞–π–ª:** `server/api/auth/verify.get.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
- –í–æ–∑–≤—Ä–∞—Ç –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer <token>
```

#### d) –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞: `POST /api/auth/refresh`

**–§–∞–π–ª:** `server/api/auth/refresh.post.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö access –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "refreshToken": "..."
}
```

#### e) –í—ã—Ö–æ–¥: `POST /api/auth/logout`

**–§–∞–π–ª:** `server/api/auth/logout.post.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—Ö–æ–¥–∞
- –ó–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è blacklist —Ç–æ–∫–µ–Ω–æ–≤ (–±—É–¥—É—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `public/test-auth.html`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
- –§–æ—Ä–º–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î —É—Å–ø–µ—à–Ω–∞  
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –ß–¢–û –û–°–¢–ê–õ–û–°–¨ –°–î–ï–õ–ê–¢–¨

### ~~–≠—Ç–∞–ø 2: Middleware –∏ –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤~~ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–°–µ—Ä–≤–µ—Ä–Ω—ã–π middleware:** ‚úÖ

- `server/middleware/auth.ts` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API
- Whitelist –ø—É–±–ª–∏—á–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ event.context

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π middleware:** ‚úÖ

- `middleware/auth.ts` - –∑–∞—â–∏—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ redirect query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

### ~~–≠—Ç–∞–ø 3: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å~~ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**Composable:** ‚úÖ

- `composables/useAuth.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ú–µ—Ç–æ–¥—ã login/logout/register
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cookies –≤–º–µ—Å—Ç–æ localStorage (SSR-safe)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Plugin:** ‚úÖ

- `plugins/auth.ts` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è auth –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–¢–∏–ø—ã:** ‚úÖ

- `types/auth.ts` - –æ–±—â–∏–µ —Ç–∏–ø—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:** ‚úÖ

- `pages/auth/signin.vue` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è useAuth)

### –≠—Ç–∞–ø 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Security headers
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** 21  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~2500  
**API endpoints:** 6  
**–°—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** 8  
**–£—Ç–∏–ª–∏—Ç:** 12  
**Middleware:** 2  
**Composables:** 1  
**Plugins:** 1

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**

- MySQL 2 (–¥—Ä–∞–π–≤–µ—Ä)
- bcryptjs (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- jsonwebtoken (JWT)
- Zod (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- TypeScript (—Ç–∏–ø–∏–∑–∞—Ü–∏—è)
- Nuxt 4 (—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt, 10 —Ä–∞—É–Ω–¥–æ–≤)  
‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Å—Ä–æ–∫–∞  
‚úÖ Refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
‚úÖ Secrets –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ .env  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π (prepared statements)  
‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–π middleware –¥–ª—è –∑–∞—â–∏—Ç—ã API  
‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ  
‚úÖ SSR-safe —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ cookies

**–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:**
‚ö†Ô∏è Rate limiting –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω  
‚ö†Ô∏è Blacklist —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω  
‚ö†Ô∏è CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
‚ö†Ô∏è Security headers –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã  
‚ö†Ô∏è –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **JWT_SECRET** - –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–º–µ–Ω–∏—Ç—å –Ω–∞ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–π –∫–ª—é—á
2. **–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - —Å–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
3. **Endpoint /api/db/init** - —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞—â–∏—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è** - —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥–ª–∞–≤–Ω—É—é –±—É–∫–≤—É, —Å—Ç—Ä–æ—á–Ω—É—é –∏ —Ü–∏—Ñ—Ä—É
5. **–¢–µ–ª–µ—Ñ–æ–Ω** - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–∑–±–µ–∫—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (+998)
6. **–ü–ò–ù–§–õ** - 14 —Ü–∏—Ñ—Ä (—É–∑–±–µ–∫—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç)
7. **Auto-imports** - TypeScript –ª–∏–Ω—Ç–µ—Ä –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è Nuxt auto-imports, –Ω–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ runtime

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ~~–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π middleware –¥–ª—è –∑–∞—â–∏—Ç—ã API~~ ‚úÖ
2. ~~–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü~~ ‚úÖ
3. ~~–°–æ–∑–¥–∞—Ç—å composable useAuth –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞~~ ‚úÖ
4. ~~–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞~~ ‚úÖ
5. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
6. –î–æ–±–∞–≤–∏—Ç—å rate limiting
7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –∏ security headers
8. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
9. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
10. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

---

**–ê–≤—Ç–æ—Ä:** Antigravity AI  
**–î–∞—Ç–∞:** 15.12.2025, 15:15  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≠—Ç–∞–ø—ã 2 –∏ 3
