# Дизайн страницы Dashboard (Панель управления)

## Оглавление

1. [Общая концепция](#общая-концепция)
2. [Dashboard для ADMIN](#dashboard-для-admin)
3. [Dashboard для MANAGER](#dashboard-для-manager)
4. [Dashboard для TEACHER](#dashboard-для-teacher)
5. [Dashboard для STUDENT](#dashboard-для-student)
6. [Технические требования](#технические-требования)
7. [План реализации](#план-реализации)

---

## Общая концепция

### Принципы построения Dashboard

1. **Роль-ориентированность** — каждая роль видит только релевантные данные
2. **Actionable data** — данные должны вести к действиям (клик → переход)
3. **Реальное время** — ключевые показатели обновляются без перезагрузки
4. **Mobile-first** — адаптивный дизайн для всех устройств

### Текущее состояние

| Роль    | Статус Dashboard                     |
| ------- | ------------------------------------ |
| STUDENT | ✅ Реализован (StudentDashboard.vue) |
| TEACHER | ❌ Заглушка (placeholder)            |
| MANAGER | ❌ Заглушка (placeholder)            |
| ADMIN   | ❌ Заглушка (placeholder)            |

---

## Dashboard для ADMIN

### Целевая аудитория

Администратор системы — полный контроль над платформой.

### Ключевые метрики (KPI)

#### Верхний ряд — Главные показатели (4 карточки)

| Карточка               | Данные                            | Источник                            |
| ---------------------- | --------------------------------- | ----------------------------------- |
| 👥 **Всего студентов** | Число + изменение за неделю       | `students` table (COUNT)            |
| 👨‍🏫 **Преподаватели** | Число активных                    | `instructors` table (COUNT)         |
| 📚 **Активные группы** | Число групп с end_date > NOW()    | `study_groups` table                |
| 🎓 **Сертификаты**     | Выдано за месяц                   | `issued_certificates` (this month) |

#### Блок 1: Системная статистика

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Статистика системы                                          │
├─────────────────────────────────────────────────────────────────┤
│  • Всего пользователей: 245                                     │
│  • Зарегистрировано сегодня: 12                                 │
│  • Активных сессий: 34                                          │
│  • Размер файлового хранилища: 2.4 GB                           │
│  • Логов действий сегодня: 1,234                                │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 2: Последние действия (Activity Log)

```
┌─────────────────────────────────────────────────────────────────┐
│  📋 Последние действия                    [Все логи →]          │
├─────────────────────────────────────────────────────────────────┤
│  🟢 15:32  Иванов И.И.    Вход в систему                        │
│  🟡 15:28  Петров П.П.    Создал группу "ОТ-2024-015"           │
│  🔵 15:25  Система        Резервное копирование завершено       │
│  🟢 15:20  Сидорова А.А.  Выдала сертификат #12345              │
│  🔴 15:18  Неизвестный    Неудачная попытка входа (3 раза)      │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 3: График активности

```
┌─────────────────────────────────────────────────────────────────┐
│  📈 Активность за неделю                                        │
├─────────────────────────────────────────────────────────────────┤
│  [LINE CHART: Логины по дням за последние 7 дней]               │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 4: Быстрые действия

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚡ Быстрые действия                                             │
├─────────────────────────────────────────────────────────────────┤
│  [+ Создать пользователя]  [+ Создать курс]  [⚙️ Настройки]     │
│  [📊 Отчёты]              [📁 Файлы]        [📋 Логи]           │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 5: Уведомления системы

```
┌─────────────────────────────────────────────────────────────────┐
│  🔔 Системные уведомления                                        │
├─────────────────────────────────────────────────────────────────┤
│  ⚠️  Представитель ООО "Альфа" ожидает подтверждения            │
│  ⚠️  3 тикета поддержки без ответа                               │
│  ℹ️  Обновление системы доступно (v1.2.3)                        │
└─────────────────────────────────────────────────────────────────┘
```

### API Endpoints для ADMIN Dashboard

| Endpoint                     | Данные                           |
| ---------------------------- | -------------------------------- |
| `GET /api/admin/stats`       | Общая статистика системы         |
| `GET /api/activity-logs`     | Последние действия (limit=10)    |
| `GET /api/admin/alerts`      | Системные уведомления            |
| `GET /api/support/tickets`   | Открытые тикеты (count)          |
| `GET /api/representatives`   | Ожидающие подтверждения (count)  |

---

## Dashboard для MANAGER

### Целевая аудитория

Менеджер — управление контентом, группами, студентами.

### Ключевые метрики (KPI)

#### Верхний ряд — Главные показатели (4 карточки)

| Карточка                  | Данные                     | Источник                    |
| ------------------------- | -------------------------- | --------------------------- |
| 📚 **Активные группы**    | Число групп в работе       | `study_groups` (is_active)  |
| 👥 **Студенты на курсах** | Слушатели в активных группах | JOIN study_group_students |
| 📝 **Тесты сегодня**      | Запланированные тесты      | `test_assignments`          |
| 🎓 **К выдаче**           | Сертификаты на подпись     | `issued_certificates` (pending) |

#### Блок 1: Группы в работе

```
┌─────────────────────────────────────────────────────────────────┐
│  📚 Группы в работе                       [Все группы →]        │
├─────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────┐  ┌──────────────────────┐             │
│  │ ОТ-2024-015          │  │ ПСД-2024-008          │             │
│  │ Охрана труда (72ч)   │  │ Пожарная безопасность│             │
│  │ 12 студентов         │  │ 8 студентов          │             │
│  │ ▓▓▓▓▓▓▓░░░ 70%       │  │ ▓▓▓▓░░░░░░ 40%       │             │
│  │ 📅 До 15.01.2026     │  │ 📅 До 20.01.2026     │             │
│  └──────────────────────┘  └──────────────────────┘             │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 2: Расписание на сегодня/неделю

```
┌─────────────────────────────────────────────────────────────────┐
│  📅 Расписание на сегодня                 [Календарь →]         │
├─────────────────────────────────────────────────────────────────┤
│  09:00 - 12:00  │ Лекция "Основы ОТ"      │ Иванов И.И.         │
│  14:00 - 17:00  │ Практика "ПСД"          │ Петров П.П.         │
│  10:00 - 11:00  │ Тест "Итоговый ОТ"      │ Группа ОТ-2024-015  │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 3: Ближайшие завершения групп

```
┌─────────────────────────────────────────────────────────────────┐
│  ⏰ Завершаются в ближайшие 7 дней                               │
├─────────────────────────────────────────────────────────────────┤
│  🔴 ОТ-2024-010  │ 10.01.2026 (завтра)    │ 15 сертификатов     │
│  🟡 ПСД-2024-005 │ 12.01.2026 (3 дня)     │ 8 сертификатов      │
│  🟢 ЭБ-2024-003  │ 15.01.2026 (6 дней)    │ 20 сертификатов     │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 4: Студенты требующие внимания

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ Требуют внимания                                             │
├─────────────────────────────────────────────────────────────────┤
│  • 3 студента пропустили более 30% занятий                      │
│  • 5 студентов не прошли назначенные тесты                      │
│  • 2 группы без назначенного преподавателя                      │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 5: Статистика за период

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Статистика за месяц                   [Период: Январь ▼]    │
├─────────────────────────────────────────────────────────────────┤
│  • Завершено групп: 8                                           │
│  • Выдано сертификатов: 156                                     │
│  • Обучено студентов: 156                                       │
│  • Средняя посещаемость: 87%                                    │
│  • Средняя успеваемость: 4.2                                    │
└─────────────────────────────────────────────────────────────────┘
```

### API Endpoints для MANAGER Dashboard

| Endpoint                          | Данные                          |
| --------------------------------- | ------------------------------- |
| `GET /api/manager/stats`          | Статистика менеджера            |
| `GET /api/groups?is_active=true`  | Активные группы (preview)       |
| `GET /api/schedule/today`         | Расписание на сегодня           |
| `GET /api/groups/ending-soon`     | Группы близкие к завершению     |
| `GET /api/students/attention`     | Студенты требующие внимания     |

---

## Dashboard для TEACHER

### Целевая аудитория

Преподаватель — ведение занятий, отметка посещаемости, оценки.

### Ключевые метрики (KPI)

#### Верхний ряд — Главные показатели (4 карточки)

| Карточка               | Данные                      | Источник                          |
| ---------------------- | --------------------------- | --------------------------------- |
| 📚 **Мои группы**      | Число групп преподавателя   | `schedule_events` → instructor_id |
| 👥 **Мои студенты**    | Уникальные слушатели        | JOIN через группы                 |
| 📅 **Занятий сегодня** | Число занятий на сегодня    | `schedule_events` (today)         |
| ⏱️ **Часы за месяц**   | Проведённые часы            | `schedule_events` (SUM hours)     |

#### Блок 1: Мои занятия сегодня

```
┌─────────────────────────────────────────────────────────────────┐
│  📅 Мои занятия сегодня (09 января 2026)                        │
├─────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ 🟢 09:00 - 12:00                                            │ │
│  │ Лекция: "Основы охраны труда"                               │ │
│  │ Группа: ОТ-2024-015  •  Ауд. 101  •  12 студентов           │ │
│  │ [Начать занятие]  [Отметить посещаемость]                   │ │
│  └────────────────────────────────────────────────────────────┘ │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ ⚪ 14:00 - 17:00                                            │ │
│  │ Практика: "Составление инструкций по ОТ"                    │ │
│  │ Группа: ОТ-2024-015  •  Ауд. 203  •  12 студентов           │ │
│  │ [Материалы занятия]                                         │ │
│  └────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 2: Мои группы

```
┌─────────────────────────────────────────────────────────────────┐
│  📚 Мои группы                           [Все группы →]         │
├─────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────┐  ┌──────────────────────┐             │
│  │ ОТ-2024-015          │  │ ПСД-2024-008          │             │
│  │ 12 студентов         │  │ 8 студентов          │             │
│  │ Посещаемость: 92%    │  │ Посещаемость: 85%    │             │
│  │ 📅 Следующее: завтра │  │ 📅 Следующее: 12.01  │             │
│  │ [Журнал] [Оценки]    │  │ [Журнал] [Оценки]    │             │
│  └──────────────────────┘  └──────────────────────┘             │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 3: Ближайшие занятия (неделя)

```
┌─────────────────────────────────────────────────────────────────┐
│  📆 Расписание на неделю                  [Полное расписание →] │
├─────────────────────────────────────────────────────────────────┤
│  Пн 09.01  │  09:00-12:00 Лекция ОТ  │  14:00-17:00 Практика    │
│  Вт 10.01  │  09:00-12:00 Лекция ПСД │  ---                     │
│  Ср 11.01  │  10:00-11:00 Тест ОТ    │  14:00-17:00 Практика    │
│  Чт 12.01  │  ---                    │  14:00-17:00 Практика ПСД│
│  Пт 13.01  │  09:00-12:00 Лекция ОТ  │  ---                     │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 4: Незаполненная посещаемость

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ Требуется заполнить посещаемость                            │
├─────────────────────────────────────────────────────────────────┤
│  🔴 08.01.2026 │ Лекция ОТ      │ ОТ-2024-015 │ [Заполнить]     │
│  🟡 07.01.2026 │ Практика ПСД   │ ПСД-2024-008│ [Заполнить]     │
└─────────────────────────────────────────────────────────────────┘
```

#### Блок 5: Статистика преподавателя

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Моя статистика за январь                                    │
├─────────────────────────────────────────────────────────────────┤
│  • Проведено занятий: 12 / 24 запланировано                     │
│  • Часы: 36 из 72                                               │
│  • Средняя посещаемость: 89%                                    │
│  • Тестов проведено: 2                                          │
└─────────────────────────────────────────────────────────────────┘
```

### API Endpoints для TEACHER Dashboard

| Endpoint                                | Данные                           |
| --------------------------------------- | -------------------------------- |
| `GET /api/teacher/stats`                | Статистика преподавателя         |
| `GET /api/schedule/my?date=today`       | Мои занятия на сегодня           |
| `GET /api/groups/my`                    | Мои группы                       |
| `GET /api/schedule/my?range=week`       | Расписание на неделю             |
| `GET /api/attendance/pending`           | Незаполненная посещаемость       |

---

## Dashboard для STUDENT

### Текущая реализация

Уже реализован в `app/components/dashboard/StudentDashboard.vue`.

### Текущие блоки

1. ✅ **Приветственный блок** — имя студента, дата, количество занятий
2. ✅ **Ближайшие занятия** — следующие 3 занятия
3. ✅ **Горящие дедлайны** — тесты с дедлайнами
4. ✅ **Мои курсы** — активные курсы с прогрессом

### Рекомендуемые улучшения

#### Добавить: Быстрые действия

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚡ Быстрые действия                                             │
├─────────────────────────────────────────────────────────────────┤
│  [📝 Пройти тест]  [📅 Расписание]  [📄 Сертификаты]  [❓ Помощь]│
└─────────────────────────────────────────────────────────────────┘
```

#### Добавить: Последние оценки

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 Мои последние оценки                                         │
├─────────────────────────────────────────────────────────────────┤
│  ✅ Тест "Основы ОТ" — 85/100                                    │
│  ✅ Практическая работа — Зачтено                                │
│  ⏳ Итоговый тест — ожидает прохождения                          │
└─────────────────────────────────────────────────────────────────┘
```

#### Добавить: Уведомления

```
┌─────────────────────────────────────────────────────────────────┐
│  🔔 Уведомления                                                  │
├─────────────────────────────────────────────────────────────────┤
│  🔴 Тест "Итоговый ОТ" — сегодня до 18:00!                       │
│  🟡 Занятие завтра в 09:00 — "Практика ПСД"                      │
│  🟢 Выдан сертификат #12345 — скачать                            │
└─────────────────────────────────────────────────────────────────┘
```

### API Endpoints для STUDENT Dashboard

| Endpoint                        | Данные                    | Статус       |
| ------------------------------- | ------------------------- | ------------ |
| `GET /api/students/dashboard`   | Основная статистика       | ✅ Реализован |
| `GET /api/students/notifications` | Уведомления             | ✅ Реализован |
| `GET /api/students/grades`      | Оценки студента           | ❌ Требуется  |

---

## Технические требования

### Архитектура компонентов

```
app/components/dashboard/
├── AdminDashboard.vue       # Dashboard для ADMIN
├── ManagerDashboard.vue     # Dashboard для MANAGER
├── TeacherDashboard.vue     # Dashboard для TEACHER
├── StudentDashboard.vue     # Dashboard для STUDENT (существует)
└── widgets/                 # Переиспользуемые виджеты
    ├── StatsCard.vue        # Карточка статистики
    ├── ActivityFeed.vue     # Лента действий
    ├── GroupsPreview.vue    # Мини-список групп
    ├── ScheduleToday.vue    # Расписание на сегодня
    ├── DeadlinesWidget.vue  # Виджет дедлайнов
    └── QuickActions.vue     # Быстрые действия
```

### Маршрутизация по ролям

```vue
<!-- app/pages/index.vue -->
<template>
  <div>
    <DashboardAdminDashboard v-if="isAdmin" />
    <DashboardManagerDashboard v-else-if="isManager" />
    <DashboardTeacherDashboard v-else-if="isTeacher" />
    <DashboardStudentDashboard v-else-if="isStudent" />
    <DashboardDefaultDashboard v-else />
  </div>
</template>
```

### Серверные API

#### Для ADMIN

```typescript
// server/api/admin/stats.get.ts
{
  totalUsers: number;
  totalStudents: number;
  totalInstructors: number;
  activeGroups: number;
  certificatesThisMonth: number;
  storageUsed: string;
  todayLogins: number;
  pendingTickets: number;
  pendingRepresentatives: number;
}
```

#### Для MANAGER

```typescript
// server/api/manager/stats.get.ts
{
  activeGroups: number;
  studentsOnCourses: number;
  testsToday: number;
  certificatesPending: number;
  groupsEndingSoon: GroupPreview[];
  studentsNeedingAttention: StudentAlert[];
  monthlyStats: {
    groupsCompleted: number;
    certificatesIssued: number;
    averageAttendance: number;
  }
}
```

#### Для TEACHER

```typescript
// server/api/teacher/stats.get.ts
{
  myGroups: number;
  myStudents: number;
  todayLessons: number;
  monthlyHours: number;
  todaySchedule: LessonPreview[];
  weekSchedule: LessonPreview[];
  pendingAttendance: AttendanceTask[];
}
```

---

## План реализации

### Этап 1: Базовая инфраструктура ✅ ЗАВЕРШЕНО

- [x] Создать структуру папок `dashboard/widgets/`
- [x] Создать базовый компонент `StatsCard.vue`
- [x] Создать базовый компонент `QuickActions.vue`
- [x] Обновить `index.vue` для маршрутизации по ролям

### Этап 2: Dashboard для TEACHER ✅ ЗАВЕРШЕНО

- [x] Создать `TeacherDashboard.vue`
- [x] Создать API `GET /api/teacher/dashboard`
- [x] Интегрировать расписание на сегодня
- [x] Интегрировать незаполненную посещаемость
- [x] Интегрировать расписание на неделю

### Этап 3: Dashboard для MANAGER ✅ ЗАВЕРШЕНО

- [x] Создать `ManagerDashboard.vue`
- [x] Создать API `GET /api/manager/dashboard`
- [x] Интегрировать группы в работе
- [x] Интегрировать завершающиеся группы
- [x] Интегрировать статистику за месяц

### Этап 4: Dashboard для ADMIN ✅ ЗАВЕРШЕНО

- [x] Создать `AdminDashboard.vue`
- [x] Создать API `GET /api/admin/dashboard`
- [x] Интегрировать системную статистику
- [x] Интегрировать последние действия (activity logs)
- [x] Интегрировать график активности за неделю

### Этап 5: Улучшение студенческого Dashboard ✅ ЗАВЕРШЕНО

- [x] Добавить виджет быстрых действий
- [x] Добавить виджет последних оценок
- [x] Улучшить уведомления (с отметкой прочитанных)

---

## Итоговый статус

**Все этапы завершены! 🎉**

- ✅ Этап 1: Базовая инфраструктура
- ✅ Этап 2: Dashboard для TEACHER
- ✅ Этап 3: Dashboard для MANAGER
- ✅ Этап 4: Dashboard для ADMIN
- ✅ Этап 5: Улучшение студенческого Dashboard

---

## Приоритеты

| Приоритет | Роль    | Обоснование                                    |
| --------- | ------- | ---------------------------------------------- |
| 🔴 Высокий | TEACHER | Преподаватели ежедневно используют Dashboard   |
| 🔴 Высокий | MANAGER | Менеджеры управляют контентом ежедневно        |
| 🟡 Средний | ADMIN   | Админ заходит реже, но требует полный контроль |
| 🟢 Низкий  | STUDENT | Уже реализован, требуется только улучшение     |

---

_Документ создан: 09.01.2026_
_Последнее обновление: 09.01.2026_
